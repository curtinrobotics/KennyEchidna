<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from urdf/kenny.urdf                | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="kenny">
  <author>
    <name> Ilke Dincer </name>
  </author>
  <description>
    An URDF of Kenny the Echidna bomb disposal robot. 
  </description>
  <material name="yellow">
    <color rgba="0.98 0.85 0.37 1"/>
  </material>
  <material name="black">
    <color rgba="0 0 0 1"/>
  </material>
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!-- <robot xmlns:xacro="http://www.ros.org/wiki/xacro"> -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ PARAMETERS -->
  <!--  ++++++++++++++++++++++++++++++++++++++++ LINKS -->
  <link name="base_footprint">
    <origin xyz="0 0 0"/>
  </link>
  <link name="base_link">
    <visual>
      <geometry>
        <box size="1.176 0.444 0.308"/>
      </geometry>
      <!-- <origin xyz="0 0 ${off_floor+base_depth/2}" /> -->
      <origin xyz="0 0 0"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <box size="1.176 0.444 0.308"/>
      </geometry>
      <!-- <origin xyz="0 0 ${off_floor+base_depth/2}" /> -->
      <origin xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="base_footprint_joint" type="fixed">
    <parent link="base_link"/>
    <child link="base_footprint"/>
    <origin xyz="0 0 0.354"/>
  </joint>
  <link name="inertial_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="200"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <joint name="inertial_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.354"/>
    <parent link="base_link"/>
    <child link="inertial_link"/>
  </joint>
  <!-- <link name="dummy"></link>
    <joint name="dummy_joint" type="fixed">
      <parent link="dummy"/>
      <child link="inertial_link"/>
    </joint> -->
  <link name="wheel_right">
    <visual>
      <geometry>
        <!-- <box size="${wheel_length} ${wheel_width} ${wheel_depth}"/> -->
        <cylinder length="0.12" radius="0.2"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="black"/>
    </visual>
    <collision>
      <geometry>
        <!-- <box size="${wheel_length} ${wheel_width} ${wheel_depth}"/> -->
        <cylinder length="0.12" radius="0.2"/>
      </geometry>
      <!-- <origin xyz="0 0 0"/> -->
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="2"/>
      <inertia ixx="0.02467" ixy="0.0" ixz="0.0" iyy="0.04411" iyz="0.0" izz="0.02467"/>
    </inertial>
  </link>
  <joint name="joint_base_wheel_right" type="continuous">
    <parent link="base_link"/>
    <child link="wheel_right"/>
    <!-- <origin xyz="${frontback * wheel_sep/2} ${sidereflect * 0.5*(base_width+wheel_width)} ${off_floor}" rpy="1.57 0 0"/> -->
    <!-- <origin xyz="0 ${reflect * 0.5*(base_width+wheel_width)} ${off_floor}" rpy="1.57 0 0"/> -->
    <origin rpy="1.57 0 0" xyz="0 0.282 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="wheel_left">
    <visual>
      <geometry>
        <!-- <box size="${wheel_length} ${wheel_width} ${wheel_depth}"/> -->
        <cylinder length="0.12" radius="0.2"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="black"/>
    </visual>
    <collision>
      <geometry>
        <!-- <box size="${wheel_length} ${wheel_width} ${wheel_depth}"/> -->
        <cylinder length="0.12" radius="0.2"/>
      </geometry>
      <!-- <origin xyz="0 0 0"/> -->
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="2"/>
      <inertia ixx="0.02467" ixy="0.0" ixz="0.0" iyy="0.04411" iyz="0.0" izz="0.02467"/>
    </inertial>
  </link>
  <joint name="joint_base_wheel_left" type="continuous">
    <parent link="base_link"/>
    <child link="wheel_left"/>
    <!-- <origin xyz="${frontback * wheel_sep/2} ${sidereflect * 0.5*(base_width+wheel_width)} ${off_floor}" rpy="1.57 0 0"/> -->
    <!-- <origin xyz="0 ${reflect * 0.5*(base_width+wheel_width)} ${off_floor}" rpy="1.57 0 0"/> -->
    <origin rpy="1.57 0 0" xyz="0 -0.282 0"/>
    <axis xyz="0 0 1"/>
  </joint>
  <transmission name="tran_base_wheel_right">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_base_wheel_right">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_base_wheel_right">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="tran_base_wheel_left">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_base_wheel_left">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_base_wheel_left">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- 4 Wheel Kenny -->
  <!-- <xacro:wheel name="wheel_rfront" sidereflect="1" frontback="1"/>
    <xacro:wheel name="wheel_rback" sidereflect="1" frontback="-1"/>
    <xacro:wheel name="wheel_lfront" sidereflect="-1" frontback="1"/>
    <xacro:wheel name="wheel_lback" sidereflect="-1" frontback="-1"/>
     -->
  <!-- Transmission Macros for wheels -->
  <!-- <xacro:kenny_wheel_joint_transmission name="base_wheel_rfront"/>
    <xacro:kenny_wheel_joint_transmission name="base_wheel_rback"/>
    <xacro:kenny_wheel_joint_transmission name="base_wheel_lfront"/>
    <xacro:kenny_wheel_joint_transmission name="base_wheel_lback"/> -->
  <link name="caster_front">
    <visual>
      <origin xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.046"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <sphere radius="0.046"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.02467" ixy="0.0" ixz="0.0" iyy="0.04411" iyz="0.0" izz="0.02467"/>
    </inertial>
  </link>
  <joint name="joint_base_caster_front" type="revolute">
    <parent link="base_link"/>
    <child link="caster_front"/>
    <origin xyz="0.542 0 -0.154"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000" lower="0" upper="0" velocity="0"/>
  </joint>
  <link name="caster_back">
    <visual>
      <origin xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.046"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <sphere radius="0.046"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.02467" ixy="0.0" ixz="0.0" iyy="0.04411" iyz="0.0" izz="0.02467"/>
    </inertial>
  </link>
  <joint name="joint_base_caster_back" type="revolute">
    <parent link="base_link"/>
    <child link="caster_back"/>
    <origin xyz="-0.542 0 -0.154"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000" lower="0" upper="0" velocity="0"/>
  </joint>
  <gazebo reference="base_link">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="wheel_right">
    <material>Gazebo/Black</material>
  </gazebo>
  <gazebo reference="wheel_left">
    <material>Gazebo/Black</material>
  </gazebo>
  <gazebo reference="caster_front">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="caster_back">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <!-- 4 Wheel Kenny -->
  <!-- <gazebo reference="wheel_rfront">
      <material>Gazebo/Black</material>
    </gazebo>
    <gazebo reference="wheel_rback">
      <material>Gazebo/Black</material>
    </gazebo>

    <gazebo reference="wheel_lfront">
      <material>Gazebo/Black</material>
    </gazebo>
    <gazebo reference="wheel_lback">
      <material>Gazebo/Black</material>
    </gazebo> -->
  <gazebo reference="inertial_link"/>
  <!-- <gazebo reference="dummy"/> -->
  <gazebo reference="base_footprint"/>
  <gazebo reference="name">
    <mu1>100.0</mu1>
    <mu2>50.0</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
  </gazebo>
  <gazebo reference="name">
    <mu1>100.0</mu1>
    <mu2>50.0</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
  </gazebo>
  <gazebo reference="name">
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
    <!-- <kp value="10000000.0"/>
      <kd value="1.0"/> -->
  </gazebo>
  <gazebo reference="name">
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
    <!-- <kp value="10000000.0"/>
      <kd value="1.0"/> -->
  </gazebo>
  <!-- <xacro:wheel_gazebo name="joint_base_wheel_lfront"/>
    <xacro:wheel_gazebo name="joint_base_wheel_lback"/>
    <xacro:wheel_gazebo name="joint_base_wheel_rfront"/>
    <xacro:wheel_gazebo name="joint_base_wheel_rback"/> -->
  <gazebo reference="inertial_joint"/>
  <!-- <gazebo reference="dummy_joint"/> -->
  <gazebo reference="base_footprint_joint"/>
  <joint name="arm_mount_joint" type="revolute">
    <parent link="base_link"/>
    <child link="reel"/>
    <origin xyz="0.0 0 0.199"/>
    <limit effort="1000.0" lower="0" upper="0" velocity="0"/>
  </joint>
  <!-- params="parent *origin"> -->
  <link name="dummy_reel">
    <visual>
      <geometry>
        <cylinder length="0.0225" radius="0.199"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.09" radius="0.199"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0"/>
    </inertial>
  </link>
  <joint name="dummy_J3" type="revolute">
    <parent link="base_link"/>
    <child link="dummy_reel"/>
    <axis xyz="0 0 0"/>
    <limit effort="1000.0" lower="0" upper="0" velocity="0"/>
  </joint>
  <link name="reel">
    <visual>
      <geometry>
        <cylinder length="0.09" radius="0.199"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.09" radius="0.199"/>
      </geometry>
      <!-- <origin xyz="0 0 0"/> -->
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <!-- joint between reel and base - allows for motorised reel -->
  <joint name="J3" type="revolute">
    <parent link="dummy_reel"/>
    <child link="reel"/>
    <axis xyz="0 0 1"/>
    <!-- <xacro:insert_block name="origin" /> -->
    <limit effort="1000.0" lower="0" upper="0" velocity="0"/>
  </joint>
  <link name="arm_link1">
    <visual>
      <geometry>
        <box size="0.73 0.378 0.232"/>
      </geometry>
      <material name="yellow"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.73 0.378 0.232"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <!-- link between reel and link1 -->
  <joint name="J0" type="revolute">
    <parent link="dummy_reel"/>
    <child link="arm_link1"/>
    <origin rpy="0 0 0" xyz="-0.0 0 0.161"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="-20" upper="20" velocity="0"/>
  </joint>
  <link name="arm_link2">
    <visual>
      <geometry>
        <box size="0.18 0.389 0.64"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.32"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.18 0.389 0.64"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.32"/>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <!-- joint between link1 and link2 -->
  <joint name="J1" type="revolute">
    <parent link="arm_link1"/>
    <child link="arm_link2"/>
    <axis xyz="0 1 0"/>
    <origin rpy="0 -0.65 0" xyz="0.365 0 0"/>
    <!-- <origin xyz="${link1_length/2-link2_depth/2} 0 0" rpy="0 0 0"/> -->
    <limit effort="1000.0" lower="0" upper="1.65" velocity="0.5"/>
  </joint>
  <link name="arm_link3">
    <visual>
      <geometry>
        <box size="0.788 0.06 0.08"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.394 0 0"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.788 0.06 0.08"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0.394 0 0"/>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <!-- joint between link 2 and link 3 -->
  <joint name="J2" type="revolute">
    <parent link="arm_link2"/>
    <child link="arm_link3"/>
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 0" xyz="0 0 0.64"/>
    <limit effort="1000.0" lower="0" upper="0.84" velocity="0.5"/>
  </joint>
  <transmission name="tran_J0">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_J0">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_J0">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="tran_J1">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_J1">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_J1">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="tran_J2">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_J2">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_J2">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="tran_J3">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_J3">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="motor_J3">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="reel">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="arm_link1">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="arm_link2">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="arm_link3">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <!--  ++++++++++++++++++++++++++++++++++++++++ JOINTS -->
  <gazebo refeence="J3">
    <!-- <dynamics damping="0.7"/> -->
    <mu1>0.2</mu1>
    <mu1>0.2</mu1>
  </gazebo>
  <gazebo reference="J0">
    <!-- <parent link="${parent}"/>
      <child link="reel"/>
      <axis xyz="0 0 1"/>
      <xacro:insert_block name="origin" /> -->
    <dynamics damping="0.7"/>
    <mu1>0.2</mu1>
    <mu1>0.2</mu1>
  </gazebo>
  <gazebo reference="J1">
    <dynamics damping="0.7"/>
    <mu1>0.2</mu1>
    <mu1>0.2</mu1>
  </gazebo>
  <gazebo reference="J2">
    <dynamics damping="0.7"/>
    <mu1>0.2</mu1>
    <mu1>0.2</mu1>
  </gazebo>
  <link name="camera_pan">
    <visual>
      <geometry>
        <cylinder length="0.023" radius="0.095"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.0115"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.023" radius="0.095"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <joint name="joint_camera_z_rotation" type="revolute">
    <!-- <parent link="arm_link1"/> -->
    <parent link="arm_link1"/>
    <child link="camera_pan"/>
    <axis xyz="0 0 1"/>
    <!-- <origin xyz="${pan_arm_offset} 0 ${link1_depth/2}" rpy="0 0 0"/> -->
    <origin rpy="0 0 0" xyz="0.12 0 0.116"/>
    <limit effort="1000.0" lower="-0.785475" upper="0.785475" velocity="0.5"/>
  </joint>
  <!-- Link created for aesthetics (prevent floating y-rotation link) -->
  <link name="camera_tilt_block">
    <visual>
      <geometry>
        <box size="0.109 0.053 0.142"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="yellow"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.109 0.053 0.142"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <joint name="camera_tilt_block_to_pan" type="fixed">
    <parent link="camera_pan"/>
    <child link="camera_tilt_block"/>
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 0" xyz="0 0.095 0.0685"/>
  </joint>
  <!-- Link/Joint responsible for tilting (rotating about y axis) -->
  <link name="camera_tilt_holder">
    <visual>
      <geometry>
        <box size="0.081 0.153 0.102"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="yellow"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="0.2" ixy="0.0" ixz="0.0" iyy="0.2" iyz="0.0" izz="0.2"/>
    </inertial>
  </link>
  <joint name="joint_camera_y_rotation" type="revolute">
    <parent link="camera_tilt_block"/>
    <child link="camera_tilt_holder"/>
    <axis xyz="0 1 0"/>
    <origin rpy="0 0 0" xyz="0 -0.081 0.071"/>
    <limit effort="1000.0" lower="-0.52365" upper="0.52365" velocity="0.5"/>
  </joint>
  <transmission name="tran_camera_z_rotation">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_camera_z_rotation">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="actuator_camera_z_rotation">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="tran_camera_y_rotation">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_camera_y_rotation">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="actuator_camera_y_rotation">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="camera_pan">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="camera_tilt_block">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo reference="camera_tilt_holder">
    <material>Gazebo/Yellow</material>
  </gazebo>
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/kenny</robotNamespace>
      <!-- <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType> -->
    </plugin>
    <plugin filename="libdiffdrive_plugin.so" name="differential_drive_controller">
      <alwaysOn>false</alwaysOn>
      <legacyMode>false</legacyMode>
      <updateRate>20</updateRate>
      <leftJoint>joint_lfront</leftJoint>
      <rightJoint>joint_rfront</rightJoint>
      <wheelSeparation>0.444</wheelSeparation>
      <wheelDiameter>0.4</wheelDiameter>
      <torque>20</torque>
      <commandTopic>/kenny/drivebase_controller/cmd_vel</commandTopic>
      <odometryTopic>/kenny/drivebase_controller/odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <robotBaseFrame>base_footprint</robotBaseFrame>
    </plugin>
  </gazebo>
</robot>

